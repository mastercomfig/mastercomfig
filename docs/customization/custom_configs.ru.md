---
description: Узнайте, как выполнять расширенную настройку и создание скриптов с помощью mastercomfig.
...

# Кастомизация

Вы можете использовать файлы настроек пользователя, чтобы переопределить специфические настройки в mastercomfig.

Это можно сделать в `autoexec.cfg`, который исполняется при запуске игры, и для конфигов 9 классов.
(`scout.cfg`, `soldier.cfg`, `pyro.cfg`, `demoman.cfg`, `heavyweapons.cfg`, `engineer.cfg`,
`medic.cfg`, `sniper.cfg`, и `spy.cfg`) которые запускаются при переходе на новый класс, `listenserver.cfg`.
Все эти файлы находятся в папке с именем `user` которую вы создадите в `tf/cfg`.

Если у вас нет этих файлов, вы можете загрузить [шаблон mastercomfig](https://github.com/mastercomfig/mastercomfig/releases/latest/download/template.zip) и переместить папку `user` в вашу папку `tf/cfg/`, чтобы кастомизировать конфиг.

Если есть то, что вы хотите запустить для всех конфигов вашего класса, вы можете добавить это в `tf/cfg/user/game_overrides.cfg`.

## Команды утилит

* `run_modules`: Применяет модули. Полезно для изменения уровней модулей в игре, а затем для их одновременного применения.
* `apply_user`: Запускает пользовательские модули, потом применяет модули, в конце запуская пользовательский autoexec. Полезно для изменения пользовательских предпочтений в игре.
* `restore_preset`: Восстановление модулей до стандартных значений по умолчанию без использования пользовательских настроек.
* `restore_config`: Запускает заново все mastercomfig и пользовательские конфиги, сбрасывая изменения, внесенные в игру.
* `version_comfig`: Выводит версию mastercomfig, используемую в данный момент
* `switchconsole`: Команда переключения выходных данных консоли и консоли. Это позволяет уменьшить влияние на производительность ведения журнала консоли, когда консоль не включена.

## Игровые переопределения

Некоторые модули устанавливают так называемые игровые переопределения, применяющиеся к предопределяющим настройкам карты или только внутриигровым настройкам, которые не могут быть применены при запуске.

Если вы хотите переопределить эту часть модуля, вам придется использовать его псевдоним переопределения игры в `tf/cfg/user/ autoexec.cfg`. Это состоит из псевдонима переопределения, запускающегося во время переопределения игры, и его параметра, который фактически содержит настройки, выполняемые псевдонимом переопределения.

* `lighting`: Использует `lightmaps_override` для управления блокирования или сглаживания освещения.
  * `lightmaps_off`: Делает освещение заблокированным.

* `shadows`: Использует `shadowlod_override` для управления качеством моделей теней.
  * `shadowlod_low`: Использует самое низкое качества модели для тонирования теней.
  * `shadowlod_high`: Использует модель самого высокого качества (в корне LOD) для рендеринга теней.

* `water`: Использует `cheap_water_override` для контроля расстояния затухания воды низкого качества.
  * `cheap_water_full`: Всегда использует полностью низкокачественную воду.
  * `cheap_water_partial`: Всегда использует частично низкокачественную воду, использует полностью низкокачественную воду в близи.
  * `cheap_water_minimal`: Использует частично низкокачественную воду в близи, использует полностью низкокачественную воду в дали.
  * `cheap_water_never`: Никогда не использует низкокачественную воду.

* `props`: Использует `detail_props_override` для управления тона травы/детали рендеринга prop и расстояние отрисовки
  * `detail_props_none`: Отключает детали props.
  * `detail_props_medium`: Обеспечивает детализацию props в дали без выцветания.
  * `detail_props_full`: Обеспечивает детализацию props на большом расстоянии с легким плавным переходом.

Так, например, если вы используете модуль низкого освещения и не хотите чтобы освещение заблокировалось, вы можете добавить `alias lightmaps_override` к вашему `autoexec.cfg`.

Или, если вы используете модуль низкой водный, но не хотите использовать низкокачественную воду, вы можете добавить `alias cheap_water_override cheap_water_never`.

## Сетевые псевдонимы

Эти псевдонимы используются mastercomfig для применения параметров настройки сети каждым классом.

Их можно запустить вручную в конфиге класса, если вы играете подклассом, например Demoknight или Huntsman.

Вы также можете изменить их псевдоним, чтобы использовать собственные настройки сети.

* `net_projectiles`: Псевдоним сетевых параметров для классов использующих снаряды (Soldier, Pyro, Demoman, Medic) (`snapshot_buffer_low`).
* `net_hitscan`: Псевдоним для параметров сети в классах использующих хитскан (Scout, Heavy, Engineer, Sniper) (`snapshot_buffer_safe`).
* `net_spy`: Псевдоним для сетевых параметров для Спая (`snapshot_buffer_low`).

## Изменение вашего пресета

mastercomfig поддерживает выбор предустановки после загрузки. Добавьте файл в папку `user` с именем `pre_comfig.cfg`. В этот файл поместите требуемый стиль как `preset=preset-name`. Предварительно установленные имена:

* none
* ultra
* high
* medium-high
* medium
* medium-low
* low
* very-low

Можно проверить текущий выбранный пресет, введя в консоль `preset_level`.

## Дополнительные псевдонимы

!!! предупреждение
    Эти шаги являются полностью необязательными и предназначены только для расширенной настройки.

Имя `user/autoexec` можно изменить с помощью псевдонима `autoexec_c`, а имя `user/modules.cfg` с помощью псевдонима `modules_c`.
Это означает, что ваши пользовательские предпочтения имеют несколько различных опций, например, предустановки, но для ваших собственных предпочтений! Измените эти псевдонимы
и используйте команду `apply_user` для применения новых выбранных пользователем параметров. Это может быть использовано для различных вариантов качества или конфигураций игры для
разных сценариев или настроения.

Можно изменить имя настраиваемых конфигов класса с помощью псевдонима `class_config_classname`.
Например, можно написать `alias class_config_heavyweapons"exec user/myheavy.cfg"` в `tf/cfg/user/autoexec.cfg` если вы хотите использовать файл `tf/cfg/user/myheavy.cfg` для хеви.

Вы можете изменить имя настраиваемой игры, переопределяя конфиг с помощью псевдонима `game_overrides_c`.
Например, можно написать `alias game_overrides_c"exec user/mygameoverrides.cfg"` в `user/autoexec.cfg` если вы хотите использовать файл `tf/cfg/user/mygameoverrides.cfg`.

Вы также можете проявить творческий подход и использовать вышеупомянутые псевдонимы для изменения конфиги вашего класса на лету с помощью биндов или консоли.
Например, вы можете иметь разные конфиги классов для Скаута в соревновательном и обычном режиме, а затем изменить свой псевдоним `class_config_scout`, чтобы запускать предпочитаемую конфигурацию класса, когда захотите.

## Расширенная настройка

При погружении глубоко в настройку ядра mastercomfig, вы можете найти полезным запукать что-то непосредственно до и после mastercomfig's `comfig.cfg`, который предоставляет основные функциональные возможности и псевдонимы.

Вы можете использовать `user/pre_comfig.cfg`, чтобы запускать что-то перед `comfig.cfg`, и `user/post_comfig.cfg`, чтобы запускать что-то после `comfig.cfg`.

Примерами использования `user/pre_comfig.cfg` могут быть такие, как настройка предустановки, как подробно описано выше, или включение параметров отладки для мониторинга процесса запуска самого mastercomfig.

Использование `user/post_comfig.cfg` является более редким, но остается действительным. При этом можно непосредственно переопределить все псевдонимы, определенные в ядре mastercomfig. Это можно использовать для изменения файла модулей по умолчанию, создания собственных модулей или уровней модулей, настройки встроенных модулей и многого другого!

## Необязательный шаблон конфига пользователя

!!! предупреждение
    Эти шаги являются полностью необязательными и предназначены только для расширенной настройки.

Чтобы получить представление о том, что поместить в `user/autoexec.cfg` и выбрать параметры,
шаблон autoexec можно загрузить из [последней версии](https://github.com/mastercomfig/mastercomfig/releases/latest).

Этот конфиг предназначен только для расширенной, отлаженной настройки и является полностью необязательным. Модули рекомендуется использовать для детальной настройки.

## Команды отладки

mastercomfig предоставляет набор удобных команд отладки, используемых при разработке mastercomfig для анализа нескольких аспектов игры.

### Общая информация

* `debug_output`: Включает вывод только разработчика (`debug_output_1`). Отображает различные предупреждения о потенциальных проблемах и выводит консоль в углу экрана.
* `debug_output_toggle`: Переключение между всеми 4-мя режимами (включая отключенные) только для выходных данных разработчика. В различных режимах отображаются различные объемы информации.
* `debug_output_display`: Отображение выходных данных консоли в углу экрана без отображения дополнительной информации.
* `debug_output_1`: Включает только вывод для разработчика 1-го уровня.
* `debug_output_2`: Включает только вывод разработчика 2-го уровня, который отображает дополнительную информацию.

### Тестирование игрового процесса

* `debug_instant_respawn`: Включает полный мгновенный респавн.
* `debug_invulnerable`: Переключает режим buddha (здоровье не может быть ниже 1).
* `debug_bots`: Заполняет сервер ботами с ИИ.
* `debug_target`: Добавляет бота-цель, которому может быть нанесён урон до бесконечности.

### Рендеринг

* `debug_occlusion`: Включает отладку системы поглощения.
* `debug_pixelvis`: Включает отладку системы видимости пикселей.
* `debug_fillrate`: Отображет переопределения при повторных проходах.
* `debug_matsys_reload`: Перезагрузка системы материалов.

### Звук

* `debug_sound_loads`: Сбрасывает текущее состояние пула звуковой памяти и включает отладку для звуковых нагрузок.
* `debug_sound_dsp`: Включает отладочный вывод параметров DSP звуков и включает визуализацию для автоматического DSP помещения, если он включен.

### Сеть

* `debug_network_packets`: Включает скорость каждого отправленного и принятого сетевого пакета, включая информацию о сжатии, если это необходимо.
* `debug_network_drops`: Включает отладочный вывод устаревших или дублированных пакетов.
* `debug_network_graph`: Включает полный сетевой график, отображающий информацию об объеме пакетов, времени взаимодействия и скорости передачи пакетов.
* `debug_network_pred`: Включает ведение журнала ошибок прогнозирования сети.

### FPS

* `debug_fps`: Включает базовый сетевой график, который удобен для просмотра FPS. Обратите внимание, что график оказывает заметное влияние на производительность.
* `debug_fps_range`: Включает полный счетчик FPS, показывающий абсолютные значения минут и максимумов FPS. Эту команду можно повторно выполнить для сброса минимумов и максимумов.

### Профилирование

* `debug_vprof_spikes`: Пики журналов ниже 100FPS (могут быть скорректированы с помощью `alias debug_vprof_spike"vprof_dump_spikes 100"`) к `tf/vprof_spikes.log` (может быть скорректирован с помощью `alias debug_vprof_log_spike"con_logfile vprof_spike.log"`).
* `debug_vprof_dump`: Регистрирует данные профилирования в `tf/vprof.log` (может быть скорректирован с помощью `alias debug_vprof_log"con_logfile vprof.log"`). Может быть повторно запущен для сброса данных синхронизации.
* `debug_vprof_report`: Регистрирует длинный набор включенных данных профилирования в `tf/vprof.log` (может быть скорректирован с помощью `alias debug_vprof_log"con_logfile vprof.log"`). Может быть повторно запущен для сброса данных синхронизации.
* `debug_vprof_off`: Отключает профилирование.
