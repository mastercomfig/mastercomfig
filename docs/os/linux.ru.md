---
description: Узнайте, как оптимизировать ОС Linux для повышения производительности.
...

# Linux

!!! информация
    Эти инструкции предназначены только для систем Linux.

## Ядро

Попробуйте использовать ядро, ориентированное на рабочий стол [XanMod](https://xanmod.org).

## мощность ЦП

Используйте `performance`, `schedutil`, либо `ondemand` регуляторы при игре TF2, используя, например, `cpupower frequency-set -g performance`. Вы можете видеть доступные регуляторы для вашего ЦП с помощью `cpupower frequency-info`.

## Режим игры

[Режим игры](https://github.com/FeralInteractive/gamemode) это удобная утилита, выпущенная Feral Interactive, которая изменит регулятор ЦП с регулятора ЦП по умолчанию на `performance`. Последние обновления позволяют ей изменить "хороший приоритет" игр, что даст игре больше ресурсов для работы.

Чтобы запустить TF2 с помощью GameMode через параметры запуска Steam, откройте Steam, затем:

1. Перейдите в Библиотеку -> щелкните правой кнопкой мыши Team Fortress 2 ->Свойства -> Общие -> Параметры запуска.
2. Введите `gamemoderun %command% -your -tf2 -launch -options -go -here`

Если вы запускаете TF2 из Lutris, "Enable Feral GameMode", скорее всего, включен по умолчанию, поэтому дополнения Launch Options не используются. Вы можете проверить в Lutris через:

* Игры -> щелкните правой кнопкой мыши на Team Fortress 2 -> Настроить -> Системные опции

## irqbalance

Балансировка прерываний IRQ между несколькими ядрами путем установки пакета `irqbalance` в вашем дистрибутиве и включения службы `irqbalance.service`, вероятно, с помощью `sudo systemctl enable --now irqbalance.service`. 
Этот пакет установлен в большинстве ОС на основе Debian по умолчанию, таких как Ubuntu и Linux Mint.

## Ananicy Cpp

Вы можете установить `schedtool` и [Ananicy](https://github.com/Nefelim4ag/Ananicy) и разрешить `ananicy-cpp.service` автоматически применить балансировку приоритетов процессов на основе правил для улучшения ресурсов, выделяемых TF2.

Однако для этого требуется [профиль для TF2](https://github.com/Nefelim4ag/Ananicy/blob/master/ananicy.d/00-default/games/_steam.rules).Следуйте инструкциям Ananicy Cpp [по импорту профиля](https://gitlab.com/ananicy-cpp/ananicy-cpp#community-rules) использовать профили сообществ из оригинального программного обеспечения Ananicy, которое можно скачать [здесь](https://github.com/Nefelim4ag/Ananicy) или установив оригинальный Ananicy.

## Оптимизация сети

Посмотрите [Arch Linux wiki](https://wiki.archlinux.org/index.php/Sysctl#Improving_performance) для получения информации об улучшении параметров сети для производительности.

## Планировщики ввода/вывода
Ядро Linux поддерживает несколько алгоритмов планировщика ввода-вывода для таких устройств хранения данных, как `mq-deadline`, `bfq`, и `kyber`. В зависимости от типа и скорости вашего устройства хранения, некоторые из этих алгоритмов могут увеличивать или уменьшать задержку запросов на чтение, а также общую пропускную способность. См. раздел [Arch Linux вики](https://wiki.archlinux.org/title/Improving_performance#Input/output_schedulers) для получения дополнительной информации.

## Оптимизация виртуальной памяти

Посмотрите [Arch Linux wiki](https://wiki.archlinux.org/index.php/Sysctl#Virtual_memory) для получения информации об улучшении параметров виртуальной памяти.

## Исправление ошибок в новой версии SDL2

Использование более новой версии libSDL2 поможет исправить такие проблемы, как чувствительность мыши, рендеринг и поддержка новых серверов дисплеев. Автоматического закрепления библиотек хоста среды выполнения Steam недостаточно для использования встроенных библиотек в TF2, поскольку скрипт запуска игры самостоятельно затеняет некоторые библиотеки. Чтобы заставить TF2 использовать более новую библиотеку, необходимо удалить встроенную библиотеку и вручную прикрепить системную библиотеку к времени выполнения.

Чтобы сделать это, перейдите в раздел `TF2_FOLDER/bin` и удалите `libSDL2-2.0.so.0` (это приведет к тому, что TF2 вернется к Steam Linux Runtime). Затем установите 32-битную версию SDL2 и подключите библиотеку к среде выполнения с помощью одной из этих команд, в зависимости от дистрибутива:

!!! Заметка
    Если вы столкнулись с проблемами рендеринга или сбоями при работе под Wayland, добавьте ```SDL_VIDEODRIVER=x11 %command%``` в параметрах запуска может помочь

!!! Заметка
    Пользователям Flatpak-версии Steam не придется устанавливать 32-битную версию SDL2, так как в среде выполнения уже есть встроенная версия. Требуется только удалить встроенную версию SDL2.


Дистрибутивы на базе Ubuntu/Debian:

```sh
sudo apt install libsdl2-2.0-0:i386
ln -s /usr/lib/i386-linux-gnu/libSDL2-2.0.so.0 "$HOME/.steam/root/ubuntu12_32/steam-runtime/pinned_libs_32/"
```

Дистрибутивы на базе Arch:

```sh
sudo pacman -S lib32-sdl2
ln -s /usr/lib32/libSDL2-2.0.so.0 "$HOME/.steam/root/ubuntu12_32/steam-runtime/pinned_libs_32/"
```

Fedora:

```sh
sudo dnf install SDL2.i686
ln -s /usr/lib/libSDL2-2.0.so.0 "$HOME/.steam/root/ubuntu12_32/steam-runtime/pinned_libs_32/"
```

## Игра падает при использовании карты NVIDIA

Были [проблемы](https://github.com/ValveSoftware/Source-1-Games/issues/4553) сообщаемые пользователями с версиями драйверов NVIDIA между 525.60.11 и 525.89.02-1, которые вызывают крах игры при запуске. Это было вызвано ошибкой в драйвере NVIDIA, которая была исправлена в версии 530.41.03. Если вы не можете обновить игру до этой версии, можно также понизить версию до 520.56.60 или ниже.
